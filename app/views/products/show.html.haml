=render :partial => 'shared/header'
#body
  .center
    %span.box1.box2
      %h2.space-50= @product.title
  %table.center.space-50
    %tr
      %td= image_tag(@product.image_url(:thumb).to_s)
      %td= @product.description
    %tr
      %td
      %td= @product.brand
    %tr
      %td
      %td= @product.manufacturer
    %tr
      %td
      %td= @product.model
  .center.space-50
    %h3 Price
    %h3= @product.price
    - if current_customer.admin?
      = link_to 'Edit', controller: "products", action: "edit", product: @product.id
      = link_to 'Delete', controller: "products", action: "destroy", product: @product.id

= form_for @order, :url => orders_path, :html => {:method => :post} do |f|
  - if @order.errors.any?
    #error_explanation
      %h2
        = pluralize(@order.errors.count, "error")
        prohibited this product from being saved:
      %ul
        - @order.errors.full_messages.each do |message|
          %li= message

  %p.center.space-20
    = f.label :quantity
    %br
    = f.text_field :quantity, "data-validation"=>"length", "data-validation-length"=> "min1"
    %br
    = f.hidden_field :product_id, value: @product.id
    = f.hidden_field :customer_id, value: @customer.customer_id

  %p.actions.center
    %br
    %script.stripe-button{ src: "https://checkout.stripe.com/checkout.js",
          data: {amount: @product.price * 100, description: @product.title, email: @customer.email, key: Rails.configuration.stripe[:publishable_key]}}

%script{:src => "//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"}
%script{:src => "//cdnjs.cloudflare.com/ajax/libs/jquery-form-validator/2.3.26/jquery.form-validator.min.js"}

:javascript
  $.validate({
  });